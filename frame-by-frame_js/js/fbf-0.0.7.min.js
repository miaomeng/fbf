/* ！~。~
 * fbf.js v0.0.7 (https://github.com/zhetengbiji/fbf);
 * 用于产生css3逐帧动画
 * 目前只应用于webkit内核浏览器
 * 作者微博：折腾笔记
 * 最后更新:2016-05-26;
 * 依赖jQuery;
 */
(function(b,a){a.FBF=function(e,d){this.$element=b(e);this.$fbfStyle=b("<style></style>");var c={width:b(e).width(),height:b(e).height(),img:"",frames:0,speed:100,loop:false,start:0,end:"null"};this.options=b.extend({},c,d);b("head").append(this.$fbfStyle);this.init()};FBF.prototype={init:function(){var f=this;var c=this.$element;var d=this.options;var e=b(new Image);this.$fbfImg=e;this.ready=false;e.one("load",function(){if(!f.ready){f.imgReady()}});e[0].src=d.img},imgReady:function(){this.ready=true;var c=this.$element;var d=this.options;var e=this.$fbfImg;c.css({"-webkit-animation":"none",width:d.width+"px",height:d.height+"px",background:'url("'+e[0].src+'") 0 0 no-repeat',"background-size":"auto 100%"});d.frames=(d.frames||e[0].width/d.width);if(typeof d.end!=="number"){d.end=d.frames-1}},reInit:function(c){this.options=b.extend({},this.options,c);this.init()},play:function(c,j){var i=this;var k=this.$element;var h=this.$fbfStyle;var d=this.$fbfImg;var g="f_b_f"+(new Date().getTime());var f="infinite";k.css("-webkit-animation","none");function e(){var m=b.extend({},i.options,c);var l=Math.abs(m.end-m.start);m.loop?m.end+=1:f="normal forwards";h.html("@-webkit-keyframes "+g+"{0% {-webkit-transform: translate3d(0, 0, 0);background-position: "+(-m.width*(m.start))+"px 0;}100% {-webkit-transform: translate3d(0, 0, 0);background-position: "+(-((m.end))*m.width)+"px 0;}}");k.css({"-webkit-animation":g+" "+(l*m.speed/1000)+"s steps("+l+" , end) "+f});if(typeof j==="function"){k.one("webkitAnimationEnd",j)}}if(this.ready){e()}else{d.one("load",function(){if(!i.ready){i.imgReady()}e()})}},stop:function(){var c=this.$element;c.css("animation-play-state","paused")}}})(jQuery,window);