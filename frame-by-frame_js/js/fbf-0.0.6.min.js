/* ！~。~
 * fbf.js v0.0.6 (https://github.com/zhetengbiji/fbf);
 * 用于产生css3逐帧动画
 * 目前只应用于webkit内核浏览器
 * 作者微博：折腾笔记
 * 最后更新:2016-04-17;
 * 依赖jQuery;
 */
(function(t,i){i.FBF=function(i,e){this.$element=t(i);this.$fbfStyle=t("<style></style>");var n={width:t(i).width(),height:t(i).height(),img:"",frames:0,speed:100,loop:false,start:0,end:"null"};this.options=t.extend({},n,e);t("head").append(this.$fbfStyle);this.init()};FBF.prototype={init:function(){var i=this;var e=this.$element;var n=this.options;var a=t(new Image);this.$fbfImg=a;this.ready=false;a.one("load",function(){if(!i.ready)i.imgReady()});a[0].src=n.img},imgReady:function(){this.ready=true;var t=this.$element;var i=this.options;var e=this.$fbfImg;t.css({"-webkit-animation":"none",width:i.width+"px",height:i.height+"px",background:'url("'+e[0].src+'") 0 0 no-repeat',"background-size":"auto 100%"});i.frames=i.frames||e[0].width/i.width;if(typeof i.end!=="number")i.end=i.frames-1},reInit:function(i){this.options=t.extend({},this.options,i);this.init()},play:function(i,e){var n=this;var a=this.$element;var s=this.$fbfStyle;var o=this.$fbfImg;var r="f_b_f"+(new Date).getTime();var f="infinite";a.css("-webkit-animation","none");function d(){var o=t.extend({},n.options,i);var d=Math.abs(o.end-o.start);o.loop?o.end+=1:f="normal forwards";s.html("@-webkit-keyframes "+r+"{0% {-webkit-transform: translate3d(0, 0, 0);background-position: "+-o.width*o.start+"px 0;}100% {-webkit-transform: translate3d(0, 0, 0);background-position: "+-o.end*o.width+"px 0;}}");a.css({"-webkit-animation":r+" "+d*o.speed/1e3+"s steps("+d+" , end) "+f});if(typeof e==="function"){a.one("webkitAnimationEnd",e)}}if(this.ready){d()}else{o.one("load",function(){if(!n.ready)n.imgReady();d()})}}}})(jQuery,window);